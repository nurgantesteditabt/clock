<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>üí£ –ú–æ–±–∏–ª—å–Ω—ã–π –°–∞–ø—ë—Ä</title>

<style>
:root{
  --bg:#0e1024;
    --panel:#1a1e40;
      --cell-open:#40458c;
        --accent:#6cf;
          --danger:#ff6b6b;
            --success:#4caf50;
            }

            *{
              box-sizing:border-box;
                font-family:system-ui,-apple-system,Segoe UI,Roboto;
                  -webkit-tap-highlight-color:transparent;
                  }

                  body{
                    margin:0;
                      background:radial-gradient(circle at top,var(--panel),var(--bg));
                        color:#fff;
                          display:flex;
                            justify-content:center;
                              align-items:center;
                                min-height:100vh;
                                }

                                .game{
                                  background:var(--panel);
                                    padding:14px;
                                      border-radius:16px;
                                        box-shadow:0 20px 40px rgba(0,0,0,.4);
                                          max-width:95vw;
                                          }

                                          .header{
                                            display:flex;
                                              justify-content:space-between;
                                                align-items:center;
                                                  margin-bottom:8px;
                                                  }

                                                  .counter{
                                                    background:#000;
                                                      padding:6px 10px;
                                                        border-radius:8px;
                                                          font-weight:bold;
                                                            color:var(--accent);
                                                            }

                                                            button{
                                                              background:var(--accent);
                                                                border:none;
                                                                  border-radius:10px;
                                                                    padding:6px 12px;
                                                                      font-weight:bold;
                                                                        cursor:pointer;
                                                                        }

                                                                        button.done{
                                                                          background:var(--success);
                                                                            color:#000;
                                                                            }

                                                                            .face{
                                                                              width:42px;
                                                                                height:42px;
                                                                                  border-radius:50%;
                                                                                    font-size:20px;
                                                                                    }

                                                                                    .controls{
                                                                                      display:flex;
                                                                                        gap:6px;
                                                                                          margin-bottom:8px;
                                                                                            flex-wrap:wrap;
                                                                                            }

                                                                                            .grid{
                                                                                              display:grid;
                                                                                                gap:4px;
                                                                                                  justify-content:center;
                                                                                                  }

                                                                                                  .cell{
                                                                                                    background:linear-gradient(145deg,#343a7a,#242861);
                                                                                                      border-radius:8px;
                                                                                                        display:flex;
                                                                                                          align-items:center;
                                                                                                            justify-content:center;
                                                                                                              font-weight:bold;
                                                                                                                user-select:none;
                                                                                                                  touch-action:manipulation;
                                                                                                                  }

                                                                                                                  .cell.open{background:var(--cell-open)}
                                                                                                                  .cell.mine{background:var(--danger)}
                                                                                                                  .cell.flag{color:gold}

                                                                                                                  .footer{
                                                                                                                    margin-top:6px;
                                                                                                                      font-size:12px;
                                                                                                                        opacity:.75;
                                                                                                                          text-align:center;
                                                                                                                          }

                                                                                                                          /* üì± –ê–¥–∞–ø—Ç–∞—Ü–∏—è */
                                                                                                                          @media(max-width:600px){
                                                                                                                            .cell{
                                                                                                                                width:6.8vw;
                                                                                                                                    height:6.8vw;
                                                                                                                                        max-width:36px;
                                                                                                                                            max-height:36px;
                                                                                                                                                font-size:3.6vw;
                                                                                                                                                  }
                                                                                                                                                  }
                                                                                                                                                  @media(min-width:601px){
                                                                                                                                                    .cell{
                                                                                                                                                        width:28px;
                                                                                                                                                            height:28px;
                                                                                                                                                                font-size:14px;
                                                                                                                                                                  }
                                                                                                                                                                  }

                                                                                                                                                                  /* ü™ü –ú–æ–¥–∞–ª–∫–∞ */
                                                                                                                                                                  .modal{
                                                                                                                                                                    position:fixed;
                                                                                                                                                                      inset:0;
                                                                                                                                                                        background:rgba(0,0,0,.6);
                                                                                                                                                                          backdrop-filter:blur(6px);
                                                                                                                                                                            display:none;
                                                                                                                                                                              justify-content:center;
                                                                                                                                                                                align-items:center;
                                                                                                                                                                                }
                                                                                                                                                                                .modal-content{
                                                                                                                                                                                  background:var(--panel);
                                                                                                                                                                                    padding:20px;
                                                                                                                                                                                      border-radius:16px;
                                                                                                                                                                                        text-align:center;
                                                                                                                                                                                          max-width:90%;
                                                                                                                                                                                          }
                                                                                                                                                                                          .modal-content button{
                                                                                                                                                                                            margin:8px;
                                                                                                                                                                                            }

                                                                                                                                                                                            /* üèÜ –ë—ç–π–¥–∂ */
                                                                                                                                                                                            .badge{
                                                                                                                                                                                              margin-top:6px;
                                                                                                                                                                                                padding:6px;
                                                                                                                                                                                                  border-radius:10px;
                                                                                                                                                                                                    background:gold;
                                                                                                                                                                                                      color:#000;
                                                                                                                                                                                                        font-weight:bold;
                                                                                                                                                                                                          text-align:center;
                                                                                                                                                                                                            display:none;
                                                                                                                                                                                                            }
                                                                                                                                                                                                            </style>
                                                                                                                                                                                                            </head>

                                                                                                                                                                                                            <body>

                                                                                                                                                                                                            <div class="game">
                                                                                                                                                                                                              <div class="header">
                                                                                                                                                                                                                  <div class="counter" id="mines">üí£ 0</div>
                                                                                                                                                                                                                      <button class="face" id="reset">üôÇ</button>
                                                                                                                                                                                                                          <div class="counter" id="time">‚è± 0</div>
                                                                                                                                                                                                                            </div>

                                                                                                                                                                                                                              <div class="controls">
                                                                                                                                                                                                                                  <button id="btn1">–õ—ë–≥–∫–∏–π</button>
                                                                                                                                                                                                                                      <button id="btn2">–°–ª–æ–∂–Ω—ã–π</button>
                                                                                                                                                                                                                                          <button id="btn3">–•–∞—Ä–¥–∫–æ—Ä</button>
                                                                                                                                                                                                                                            </div>

                                                                                                                                                                                                                                              <div class="badge" id="badge">üèÜ –ú–∞—Å—Ç–µ—Ä —Ö–∞—Ä–¥–∫–æ—Ä–æ–≤</div>

                                                                                                                                                                                                                                                <div class="grid" id="grid"></div>

                                                                                                                                                                                                                                                  <div class="footer">
                                                                                                                                                                                                                                                      –¢–∞–ø ‚Äî –æ—Ç–∫—Ä—ã—Ç—å ‚Ä¢ –î–æ–ª–≥–∏–π —Ç–∞–ø / –ü–ö–ú ‚Äî —Ñ–ª–∞–≥
                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                        </div>

                                                                                                                                                                                                                                                        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
                                                                                                                                                                                                                                                        <div class="modal" id="modal">
                                                                                                                                                                                                                                                          <div class="modal-content">
                                                                                                                                                                                                                                                              <h3>‚ö†Ô∏è –•–∞—Ä–¥–∫–æ—Ä</h3>
                                                                                                                                                                                                                                                                  <p>
                                                                                                                                                                                                                                                                        –í—ã —Ç–æ—á–Ω–æ —É–≤–µ—Ä–µ–Ω—ã?<br>
                                                                                                                                                                                                                                                                              –≠—Ç–æ —Å–∞–º—ã–π —Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å,<br>
                                                                                                                                                                                                                                                                                    —Å–æ–¥–µ—Ä–∂–∞—â–∏–π <b>–±–æ–ª–µ–µ 800 –±–æ–º–±</b>
                                                                                                                                                                                                                                                                                        </p>
                                                                                                                                                                                                                                                                                            <button onclick="confirmHardcore(true)">–î–ê</button>
                                                                                                                                                                                                                                                                                                <button onclick="confirmHardcore(false)">–ù–ï–¢</button>
                                                                                                                                                                                                                                                                                                  </div>
                                                                                                                                                                                                                                                                                                  </div>

                                                                                                                                                                                                                                                                                                  <script>
                                                                                                                                                                                                                                                                                                  const levels=[
                                                                                                                                                                                                                                                                                                    {size:12,mines:0.12},
                                                                                                                                                                                                                                                                                                      {size:22,mines:0.20},
                                                                                                                                                                                                                                                                                                        {size:50,mines:0.30}
                                                                                                                                                                                                                                                                                                        ];

                                                                                                                                                                                                                                                                                                        let progress=JSON.parse(localStorage.getItem("progress"))||{
                                                                                                                                                                                                                                                                                                          l1:false,l2:false,l3:false,badge:false
                                                                                                                                                                                                                                                                                                          };

                                                                                                                                                                                                                                                                                                          let level=0,size,mineCount;
                                                                                                                                                                                                                                                                                                          let grid=[],opened=0,flags=0,timer=0,interval,gameOver=false;

                                                                                                                                                                                                                                                                                                          const gridEl=document.getElementById("grid");

                                                                                                                                                                                                                                                                                                          function save(){localStorage.setItem("progress",JSON.stringify(progress));}

                                                                                                                                                                                                                                                                                                          function updateUI(){
                                                                                                                                                                                                                                                                                                            btn1.classList.toggle("done",progress.l1);
                                                                                                                                                                                                                                                                                                              btn2.classList.toggle("done",progress.l2);
                                                                                                                                                                                                                                                                                                                btn3.classList.toggle("done",progress.l3);
                                                                                                                                                                                                                                                                                                                  badge.style.display=progress.badge?"block":"none";
                                                                                                                                                                                                                                                                                                                  }

                                                                                                                                                                                                                                                                                                                  btn1.onclick=()=>startLevel(0);
                                                                                                                                                                                                                                                                                                                  btn2.onclick=()=>startLevel(1);
                                                                                                                                                                                                                                                                                                                  btn3.onclick=()=>document.getElementById("modal").style.display="flex";

                                                                                                                                                                                                                                                                                                                  function confirmHardcore(ok){
                                                                                                                                                                                                                                                                                                                    document.getElementById("modal").style.display="none";
                                                                                                                                                                                                                                                                                                                      if(ok) startLevel(2);
                                                                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                                                                      function startLevel(l){
                                                                                                                                                                                                                                                                                                                        level=l;
                                                                                                                                                                                                                                                                                                                          start();
                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                          function start(){
                                                                                                                                                                                                                                                                                                                            clearInterval(interval);
                                                                                                                                                                                                                                                                                                                              grid=[];opened=0;flags=0;timer=0;gameOver=false;
                                                                                                                                                                                                                                                                                                                                size=levels[level].size;
                                                                                                                                                                                                                                                                                                                                  mineCount=Math.floor(size*size*levels[level].mines);

                                                                                                                                                                                                                                                                                                                                    gridEl.innerHTML="";
                                                                                                                                                                                                                                                                                                                                      gridEl.style.gridTemplateColumns=`repeat(${size},1fr)`;

                                                                                                                                                                                                                                                                                                                                        mines.textContent="üí£ "+mineCount;
                                                                                                                                                                                                                                                                                                                                          time.textContent="‚è± 0";
                                                                                                                                                                                                                                                                                                                                            reset.textContent="üôÇ";

                                                                                                                                                                                                                                                                                                                                              for(let i=0;i<size*size;i++)grid.push({m:false,o:false,f:false,c:0});
                                                                                                                                                                                                                                                                                                                                                let p=0;
                                                                                                                                                                                                                                                                                                                                                  while(p<mineCount){
                                                                                                                                                                                                                                                                                                                                                      let i=Math.random()*grid.length|0;
                                                                                                                                                                                                                                                                                                                                                          if(!grid[i].m){grid[i].m=true;p++;}
                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                              for(let i=0;i<grid.length;i++)
                                                                                                                                                                                                                                                                                                                                                                  if(!grid[i].m)
                                                                                                                                                                                                                                                                                                                                                                        grid[i].c=nb(i).filter(n=>grid[n].m).length;

                                                                                                                                                                                                                                                                                                                                                                          grid.forEach((_,i)=>{
                                                                                                                                                                                                                                                                                                                                                                              const d=document.createElement("div");
                                                                                                                                                                                                                                                                                                                                                                                  d.className="cell";
                                                                                                                                                                                                                                                                                                                                                                                      addPointer(d,i);
                                                                                                                                                                                                                                                                                                                                                                                          d.onclick=()=>open(i,d);
                                                                                                                                                                                                                                                                                                                                                                                              d.oncontextmenu=e=>{e.preventDefault();flag(i,d);}
                                                                                                                                                                                                                                                                                                                                                                                                  gridEl.appendChild(d);
                                                                                                                                                                                                                                                                                                                                                                                                    });

                                                                                                                                                                                                                                                                                                                                                                                                      interval=setInterval(()=>!gameOver&&(time.textContent="‚è± "+(++timer)),1000);
                                                                                                                                                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                                                                                                                                                      function nb(i){
                                                                                                                                                                                                                                                                                                                                                                                                        let x=i%size,y=i/size|0,a=[];
                                                                                                                                                                                                                                                                                                                                                                                                          for(let dy=-1;dy<=1;dy++)
                                                                                                                                                                                                                                                                                                                                                                                                              for(let dx=-1;dx<=1;dx++){
                                                                                                                                                                                                                                                                                                                                                                                                                    if(!dx&&!dy)continue;
                                                                                                                                                                                                                                                                                                                                                                                                                          let nx=x+dx,ny=y+dy;
                                                                                                                                                                                                                                                                                                                                                                                                                                if(nx>=0&&ny>=0&&nx<size&&ny<size)a.push(ny*size+nx);
                                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                                      return a;
                                                                                                                                                                                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                                                                                                                                                                                      function open(i,e){
                                                                                                                                                                                                                                                                                                                                                                                                                                        if(gameOver||grid[i].o||grid[i].f)return;
                                                                                                                                                                                                                                                                                                                                                                                                                                          grid[i].o=true;e.classList.add("open");opened++;
                                                                                                                                                                                                                                                                                                                                                                                                                                            if(grid[i].m){e.textContent="üí£";end(false);return;}
                                                                                                                                                                                                                                                                                                                                                                                                                                              if(grid[i].c)e.textContent=grid[i].c;
                                                                                                                                                                                                                                                                                                                                                                                                                                                else nb(i).forEach(n=>open(n,gridEl.children[n]));
                                                                                                                                                                                                                                                                                                                                                                                                                                                  if(opened===size*size-mineCount)end(true);
                                                                                                                                                                                                                                                                                                                                                                                                                                                  }

                                                                                                                                                                                                                                                                                                                                                                                                                                                  function flag(i,e){
                                                                                                                                                                                                                                                                                                                                                                                                                                                    if(gameOver||grid[i].o)return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                      grid[i].f=!grid[i].f;
                                                                                                                                                                                                                                                                                                                                                                                                                                                        e.textContent=grid[i].f?"üö©":"";
                                                                                                                                                                                                                                                                                                                                                                                                                                                          flags+=grid[i].f?1:-1;
                                                                                                                                                                                                                                                                                                                                                                                                                                                            mines.textContent="üí£ "+(mineCount-flags);
                                                                                                                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                                                                                                                            function end(win){
                                                                                                                                                                                                                                                                                                                                                                                                                                                              gameOver=true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                reset.textContent=win?"üòé":"üòµ";
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  if(win){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if(level===0)progress.l1=true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if(level===1)progress.l2=true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                              if(level===2){progress.l3=true;progress.badge=true;}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  save();updateUI();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    function addPointer(el,i){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      let t;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        el.onpointerdown=()=>t=setTimeout(()=>flag(i,el),450);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          el.onpointerup=el.onpointerleave=el.onpointercancel=()=>clearTimeout(t);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          reset.onclick=start;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          updateUI();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          start();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </script>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </body>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </html>